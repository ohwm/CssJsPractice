<!DOCTYPE html>
<html lang="ko">
<head>
    <title>무한스크롤 실습</title>
    <style>
        .box {
            width: 500px;
            height: 500px;
            background-color: skyblue;
            margin: 50px;
        }
    </style>
    <script>
        let timer = "NotYet";
        window.addEventListener("scroll", () => {
            if (timer !== "NotYet") return; // Early-exit 방식 <- 중요!!!
            timer = setTimeout(() => {
                timer = "NotYet"; // 타이머 초기화
            }, 1000); // 1초 후에 타이머 초기화
            const scrollPercent = document.documentElement.scrollTop / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
            console.log(scrollPercent);

            if (scrollPercent <= 0.7) return;
            document.getElementById("container").innerHTML += `<div class="box"></div>`;
        })
    </script>
</head>
<body>
    <div id="container">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
    </div>
</body>
</html>