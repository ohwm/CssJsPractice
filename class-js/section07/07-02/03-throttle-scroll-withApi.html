<!DOCTYPE html>
<html lang="ko">
<head>
    <title>무한스크롤 실습</title>
    <style>
        .box {
            width: 500px;
            height: 500px;
            background-color: skyblue;
            margin: 50px;
        }

        #container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
    </style>
    <script>
        let timer = "NotYet";
        window.addEventListener("scroll", () => {
            if (timer !== "NotYet") return; // Early-exit 방식 <- 중요!!!
            timer = setTimeout(() => {
                timer = "NotYet"; // 타이머 초기화
            }, 1000); // 1초 후에 타이머 초기화
            const scrollPercent = document.documentElement.scrollTop / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
            console.log(scrollPercent);

            if (scrollPercent <= 0.7) return;
            fetch("https://dog.ceo/api/breeds/image/random").then((받아온결과) => {
                받아온결과.json().then((객체만뽑힌결과) => {
                    console.log(객체만뽑힌결과.message)
                    document.getElementById("container").innerHTML += `<img src="${객체만뽑힌결과.message}" width="300px" />`
                })
            })
        })
    </script>
</head>
<body>
    <div id="container">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
    </div>
</body>
</html>